<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Some Notes on Python and PyGame | Xiaofeng QU</title>
  <meta name="author" content="Xiaofeng QU">
  
  <meta name="description" content="A little note about Python 3D display, STL file format, and C++ Calling.">
  
  
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  <meta property="og:title" content="Some Notes on Python and PyGame"/>
  <meta property="og:site_name" content="Xiaofeng QU"/>

  
    <meta property="og:image" content="undefined"/>
  

  <!-- Icons -->
  <!-- 16x16 -->
  <link rel="shortcut icon" href="/favicon.ico">
  <!-- 32x32 -->
  <link rel="shortcut icon" href="/favicon.png">
  <!-- 57x57 (precomposed) for iPhone 3GS, pre-2011 iPod Touch and older Android devices -->
  <link rel="apple-touch-icon-precomposed" href="/apple-icon-57.png">
  <!-- 72x72 (precomposed) for 1st generation iPad, iPad 2 and iPad mini -->
  <link rel="apple-touch-icon-precomposed" sizes="72x72" href="/apple-icon-72.png">
  <!-- 114x114 (precomposed) for iPhone 4, 4S, 5 and post-2011 iPod Touch -->
  <link rel="apple-touch-icon-precomposed" sizes="114x114" href="/apple-icon-114.png">
  <!-- 144x144 (precomposed) for iPad 3rd and 4th generation -->
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/apple-icon-144.png">


  <link rel="alternate" href="/atom.xml" title="Xiaofeng QU" type="application/atom+xml">
  <link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.1.0/css/bootstrap.min.css" type="text/css">
<link rel="stylesheet" href="//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css" type="text/css">
<link rel="stylesheet" href="/css/style.css" type="text/css">
  <script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>
  <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
  
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-50831338-X']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>

</head>

<body>
  <header id="header" class='normal_mode'>
    <nav id="main-nav">
  <ul class='container'>
    
      <li><a href="/">Home</a></li>
    
      <li><a href="/archives">Archives</a></li>
    
      <li><a href="/research">Research</a></li>
    
      <li><a href="/links">Links</a></li>
    
      <li><a href="/about">About</a></li>
    
  </ul>
  <div class="clearfix"></div>
</nav>
  </header>
  <div id="content" class="container">
    <article class="post">
  
    <div class="gallery">
  <div class="photoset">
    
      <img src="">
    
  </div>
  <div class="control">
    <div class="prev"></div>
    <div class="next"></div>
  </div>
</div>
  
  <div class="post-content">
    <header>
      
      <time datetime="2014-02-25T11:28:47.000Z"><a href="/2014/02/25/python-pygame-notes/">Tuesday, Feb 25 2014, 07:28:47</a></time>

  
    <h1 class="title">Some Notes on Python and PyGame</h1>
  


  
  <div class="categories">
  	<i class="fa fa-folder-open"></i>
    <a href="/categories/coding/">coding</a>
  </div>


  
  <div class="tags">
  	<i class="fa fa-tag"></i>
    <a href="/tags/note/">note</a>, <a href="/tags/python/">python</a>
  </div>

<div class="clear"></div>
      
    </header>
    <div class="entry">
      
        <p>A little note about Python 3D display, STL file format, and C++ Calling.</p>
<a id="more"></a>

<h2 id="Python_FAQ"><a href="https://docs.google.com/document/d/1jEQ4A8MCJ9Q81LgyHW0uee-IT7A0b-avQoO-VaxiDtU/edit" target="_blank">Python FAQ</a></h2>
<h2 id="PyGame_Resources">PyGame Resources</h2>
<ul>
<li><p><a href="http://codentronix.com/2011/04/24/simple-starfield-with-python-and-pygame/" target="_blank">Simple Starfield with Python and Pygame</a></p>
</li>
<li><p><a href="http://codentronix.com/2011/04/14/game-programming-with-python-and-pygame-making-breakout/" target="_blank">Game Programming with Python and PyGame – Making Breakout</a></p>
</li>
<li><p><a href="http://pyopengl.sourceforge.net/" target="_blank">PyOpenGL</a></p>
</li>
<li><p><a href="http://vpython.org/" target="_blank">VPython</a><br>VPython is the Python programming language plus a 3D graphics module called “visual” originated by David Scherer in 2000. VPython makes it easy to create navigable 3D displays and animations, even for those with limited programming experience. Because it is based on Python, it also has much to offer for experienced programmers and researchers.</p>
</li>
<li><p><a href="http://greendalecs.wordpress.com/2012/04/21/3d-programming-in-python-part-1/" target="_blank">3D Programming in Python</a></p>
</li>
<li><p><a href="http://www.vrplumber.com/py3d.py" target="_blank">Python 3D Software</a></p>
</li>
<li><p><a href="http://cyrille.rossant.net/2d-graphics-rendering-tutorial-with-pyopengl/" target="_blank">2D graphics rendering tutorial with PyOpenGL</a></p>
</li>
<li><p><a href="https://wiki.python.org/moin/PythonGameLibraries" target="_blank">PythonGameLibraries</a></p>
</li>
<li><p><a href="http://www.cosc.canterbury.ac.nz/greg.ewing/python/Albow/" target="_blank">Albow</a><br>A Little Bit of Widgetry for PyGame<br>This is a widget set for creating a GUI using PyGame. It has been developed over the course of several PyWeek game competition entries. I am documenting and releasing it as a separate package so that others may benefit from it, and so that it will be permissible for use in future PyGame entries.</p>
</li>
<li><p><a href="http://www.pyqtgraph.org/" target="_blank">PyQtGraph</a><br><strong>PyQtGraph</strong> is a pure-python graphics and GUI library built on <a href="http://www.riverbankcomputing.co.uk/software/pyqt/intro" target="_blank">PyQt4</a> / <a href="http://www.pyside.org/" target="_blank">PySide</a> and <a href="http://www.numpy.org/" target="_blank">numpy</a>. It is intended for use in mathematics / scientific / engineering applications. Despite being written entirely in python, the library is very fast due to its heavy leverage of numpy for number crunching and <a href="http://doc-snapshot.qt-project.org/4.8/graphicsview.html" target="_blank">Qt’s GraphicsView framework</a> for fast display. PyQtGraph is distributed under the <a href="http://www.opensource.org/licenses/mit-license.php" target="_blank">MIT open-source license</a>. </p>
</li>
</ul>
<h2 id="TVTK_STL_Reader_and_Writer"><a href="http://docs.enthought.com/mayavi/tvtk/" target="_blank">TVTK</a> STL Reader and Writer</h2>
<ul>
<li><p>This package is based on <a href="http://www.vtk.org/" target="_blank">VTK</a>.<br>The <strong>Visualization Toolkit (VTK)</strong> is an open-source, freely available software system for 3D computer graphics, image processing and visualization. VTK consists of a C++ class library and several interpreted interface layers including Tcl/Tk, Java, and Python. Kitware, whose team created and continues to extend the toolkit, offers professional support and consulting services for VTK. VTK supports a wide variety of visualization algorithms including: scalar, vector, tensor, texture, and volumetric methods; and advanced modeling techniques such as: implicit modeling, polygon reduction, mesh smoothing, cutting, contouring, and Delaunay triangulation. VTK has an extensive information visualization framework, has a suite of 3D interaction widgets, supports parallel processing, and integrates with various databases on GUI toolkits such as Qt and Tk. VTK is cross-platform and runs on Linux, Windows, Mac and Unix platforms. </p>
</li>
<li><p><a href="http://sebug.net/paper/books/scipydoc/tvtk_intro.html" target="_blank">TVTK- 三维可视化数据</a></p>
</li>
<li><p><a href="http://mayavi.sourceforge.net/" target="_blank">The MayaVi Data Visualizer</a></p>
</li>
<li><p><a href="http://junweihuang.info/blog/?p=347" target="_blank">3D visualization of DXF STL file using mayavi python script</a></p>
</li>
<li><p><a href="http://www.vtk.org/Wiki/VTK/Examples/Python/STLReader" target="_blank">VTK/Examples/Python/STLReader</a></p>
</li>
</ul>
<h2 id="Python_ 调用外部 _DLL">Python 调用外部 DLL</h2>
<ul>
<li><p><a href="http://www.cnblogs.com/wuchang/archive/2010/04/04/1704456.html" target="_blank">Python: 使用 ctypes 库调用外部 DLL</a><br>详细的例子和流程</p>
</li>
<li><p>最简 ctypes 实例（只能调用 DLL 文件中的 C 函数，不能调用 C++ 类内成员函数）</p>
<p>  from ctypes import *<br>  user32 = windll.LoadLibrary(‘user32.dll’) # load dll<br>  user32.MessageBoxA(0, ‘Ctypes is cool!’, ‘Ctypes’, 0)</p>
<h1 id="call_message_box_function">call message box function</h1>
</li>
<li><p><a href="http://stackoverflow.com/questions/19636210/accessing-ctypes-returned-objects-methods" target="_blank"><strong>You cannot call C++ instance methods from ctypes</strong>. You will need to export a non-member function that will call the method. It will look like this in C++…</a></p>
</li>
<li><p>对于 C 函数 DLL 来说，不知道头文件也是可以调用的</p>
<ol>
<li><p>用微软 depends 工具，查询到函数名称。</p>
</li>
<li><p>手动编写函数输入输出参数格式，然后调用</p>
<p>from ctypes import *</p>
<p>pdi = cdll.LoadLibrary(r’PDI.dll’) # load dll<br>DiscoverCnx=getattr(pdi, “?DiscoverCnx@CPDIdev@@UAE?AW4ePiCommType@@H@Z”)<br>DiscoverCnx.argtypes=[c_void_p];<br>DiscoverCnx.restype=c_int;<br>print DiscoverCnx(c_void_p(0))</p>
</li>
</ol>
</li>
</ul>
<p><strong>可惜</strong> 类成员函数调用类内成员变量或函数会造成访问越界。</p>
<h2 id="HOPE_-_A_solution_to_call_C++_member_function_from_Python">HOPE - A solution to call C++ member function from Python</h2>
<h3 id="boost"><a href="http://www.boost.org/" target="_blank">boost</a></h3>
<ul>
<li><a href="http://www.boost.org/doc/libs/1_55_0/libs/python/doc/tutorial/doc/html/python/exposing.html" target="_blank">Exposing Classes</a></li>
</ul>
<h4 id="Rewrite_the_-h_file_to_a_Python_Class">Rewrite the .h file to a Python Class</h4>
<p>Consider a C++ class/struct that we want to expose to Python:</p>
<pre><code><span class="keyword">struct</span> World
{
    <span class="keyword">void</span> <span class="built_in">set</span>(<span class="built_in">std</span>::<span class="built_in">string</span> msg) { <span class="keyword">this</span>-&gt;msg = msg; }
    <span class="built_in">std</span>::<span class="built_in">string</span> greet() { <span class="keyword">return</span> msg; }
    <span class="built_in">std</span>::<span class="built_in">string</span> msg;
};
</code></pre><p>We can expose this to Python by writing a corresponding Boost.Python C++ Wrapper:</p>
<pre><code><span class="preprocessor">#include &lt;boost/python.hpp&gt;</span>

<span class="keyword">using</span> <span class="keyword">namespace</span> boost::python;

BOOST_PYTHON_MODULE(hello)
{
    class_&lt;World&gt;(<span class="string">"World"</span>)
        .def(<span class="string">"greet"</span>, &amp;World::greet)
        .def(<span class="string">"set"</span>, &amp;World::<span class="built_in">set</span>)
    ;
}
</code></pre><p>Here, we wrote a C++ class wrapper that exposes the member functions greet and set. Now, after building our module as a shared library, we may use our class World in Python. Here’s a sample Python session:</p>
<pre><code><span class="prompt">&gt;&gt;&gt; </span><span class="keyword">import</span> hello
<span class="prompt">&gt;&gt;&gt; </span>planet = hello.World()
<span class="prompt">&gt;&gt;&gt; </span>planet.set(<span class="string">'howdy'</span>)
<span class="prompt">&gt;&gt;&gt; </span>planet.greet()
<span class="string">'howdy'</span>
</code></pre><h3 id="Boost-Python"><a href="http://www.boost.org/doc/libs/1_55_0/libs/python/doc/index.html" target="_blank">Boost.Python</a></h3>
<p>This is the actual package responsible for the interoperability between C++ and Python</p>
<h3 id="SWIG"><a href="http://www.swig.org/" target="_blank">SWIG</a></h3>
<p>SWIG is another possible solution. Maybe later.</p>

      
    </div>
    <footer>
      
          
<!-- JiaThis Button BEGIN -->
<div class="jiathis_style">
  <span class="jiathis_txt">分享到：</span>
  <a class="jiathis_button_weixin">微信</a>
  <a class="jiathis_button_douban">豆瓣</a>
  <a class="jiathis_button_tsina">新浪微博</a>
  <a class="jiathis_button_fb">Facebook</a>
  <a class="jiathis_button_twitter">Twitter</a>
  <a class="jiathis_button_email">邮件</a>
  <a class="jiathis_button_print">打印</a>

  <a href="http://www.jiathis.com/share?uid=" class="jiathis jiathis_txt jiathis_separator jtico jtico_jiathis" target="_blank">更多</a>
  <a class="jiathis_counter_style"></a>
</div>
<script type="text/javascript" src="http://v3.jiathis.com/code_mini/jia.js?uid=" charset="utf-8"></script>
<!-- JiaThis Button END -->


          <div class="clearfix"></div>
          <nav id="pagination">
  
    <a href="/2014/02/26/metric-learning/" class="alignleft prev"><i class="fa fa-long-arrow-left"></i>Next</a>
  
  
    <a href="/2014/01/17/hong-kong-visa/" class="alignright next">Prev<i class="fa fa-long-arrow-right"></i></a>
  
  <div class="clearfix"></div>
</nav>
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>


<section id="comment">
  <h1 class="title">Comments</h1>

  
      <!-- Duoshuo Comment BEGIN -->
<div class="ds-thread" data-thread-key="/2014/02/25/python-pygame-notes/"></div>
<!-- Duoshuo Comment END -->
  
</section>




    <div class="clearfix"></div>
  </div>
  <footer id="footer" class="inner"><div>
  
  &copy; 2014 Xiaofeng QU
  
</div>
Powered by <a href="http://zespia.tw/hexo/" title="Hexo" target="_blank" rel="external">Hexo</a> and <a href="http://pages.github.com/" title="GitHub Pages" target="_blank" rel="external">GitHub Pages</a>

<div class="clearfix"></div></footer>
  
<script type="text/javascript" src="/js/jquery.imagesloaded.min.js"></script>
<script type="text/javascript" src="/js/gallery.js"></script>
<script type="text/javascript" src="//netdna.bootstrapcdn.com/bootstrap/3.1.0/js/bootstrap.min.js"></script>


<script type="text/javascript">
var disqus_shortname = 'hexocsxfqutk';

(function(){
  var dsq = document.createElement('script');
  dsq.type = 'text/javascript';
  dsq.async = true;
  dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
}());
</script>



    <script type="text/javascript">
        (function(){

            $(window).scroll(function(){

                var scrollTop = $(window).scrollTop();
                if ( scrollTop >200 ){
                    $("#main-nav").removeClass('normal_mode').addClass('top_mode');
                } else{
                    $("#main-nav").removeClass('top_mode').addClass('normal_mode');
                }

            });

        })();
    </script>



  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>
  <script type="text/javascript">
  (function($){
    $('.fancybox').fancybox({
      'titlePosition': 'inside'
    });
  })(jQuery);
  </script>



    
    <script type="text/javascript">
      var duoshuoQuery = {short_name:"csxfqutk"};
    (function() {
      var ds = document.createElement('script');
      ds.type = 'text/javascript';ds.async = true;
      ds.src = 'http://static.duoshuo.com/embed.js';
      ds.charset = 'UTF-8';
      (document.getElementsByTagName('head')[0] 
      || document.getElementsByTagName('body')[0]).appendChild(ds);
    })();
  </script>



<script type="text/javascript">
  
  $(function(){

    $('.title').hover(
      function() {      
        $(this).stop().animate(
          {'marginLeft': '10px'}, 200
        );   
      }, 
      function() {       
        $(this).stop().animate({'marginLeft': '0px'}, 200);      
      
    });   

  });

</script>


</body>
</html>